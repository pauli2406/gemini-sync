---
title: SQL Pull
---

Use `sql_pull` when data comes from relational systems and should be fetched on a schedule.

## Minimal Example

```yaml
apiVersion: sync.gemini.io/v1alpha1
kind: Connector
metadata:
  name: hr-employees
spec:
  mode: sql_pull
  schedule: "0 */3 * * *"
  source:
    type: postgres
    secretRef: hr-db-credentials
    query: >
      SELECT employee_id, full_name, updated_at
      FROM employees
    watermarkField: updated_at
  mapping:
    idField: employee_id
    titleField: full_name
    contentTemplate: "{{ full_name }}"
  output:
    bucket: gs://company-ingest-relay
    prefix: hr-employees
    format: ndjson
  gemini:
    projectId: my-project
    location: eu
    dataStoreId: hr-ds
  reconciliation:
    deletePolicy: auto_delete_missing
```

## Provider Values

Supported `spec.source.type` values for SQL pull:

- `postgres`
- `mysql`
- `mssql`
- `oracle`

See provider references under [/docs/reference/providers/postgres](/docs/reference/providers/postgres).

## Safety Guidance

- Use snapshot extraction queries when `deletePolicy=auto_delete_missing`.
- Avoid mixing incremental extraction with auto-delete unless downstream deletes are explicitly controlled.

## Bucket-Only SQL Pull (No Datastore Yet)

When you only want artifacts in GCS, disable ingestion. You can export either canonical NDJSON or raw SQL CSV.

### Option A: Bucket-Only NDJSON

```yaml
spec:
  output:
    bucket: gs://company-ingest-relay
    prefix: oracle-qn-data-march-2025
    format: ndjson
    publishLatestAlias: true
  ingestion:
    enabled: false
```

### Option B: Raw CSV Export (No Mapping)

```yaml
spec:
  mode: sql_pull
  source:
    type: oracle
    secretRef: oracle-sample-credentials
    query: SELECT * FROM pda.QN_DATA
  output:
    bucket: gs://company-ingest-relay
    prefix: oracle-qn-data-raw
    format: csv
    publishLatestAlias: true
  ingestion:
    enabled: false
```

For `output.format: csv`, the runtime writes all SQL row fields into `rows.csv` in run and latest paths. Mapping is optional in this mode.
